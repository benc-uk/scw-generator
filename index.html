<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="assets/icon.png" type="image/png" />

    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css" integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

    <link rel="stylesheet" href="assets/colors.css" />
    <link rel="stylesheet" href="assets/style.css" />

    <script src="./js/app.js" type="module"></script>

    <title>SCW Generator</title>
  </head>
  <body>
    <main x-data="app" @keyup.ctrl.z.window="undo()">
      <div class="nav1 flex">
        <select class="pure-input-1-2" x-model="sampleCount">
          <option disabled>Sample Count</option>
          <option>200</option>
          <option>225</option>
          <option>256</option>
          <option>337</option>
          <option>512</option>
          <option>600</option>
          <option>674</option>
        </select>
        &nbsp;&nbsp;
        <div class="tab" :class="tab == 'simple' || 'tab-nosel'" @click="tab = 'simple'">SIMPLE</div>
        <div class="tab" :class="tab == 'synth' || 'tab-nosel'" @click="tab = 'synth'">SYNTH</div>
        <div class="push flex gap">
          <div x-html="`v${version} ${folding} - Audio device rate<br>${sampleRate} Hz`"></div>
          <button class="pure-button" @click="folding=!folding" :class="folding && 'button-success'">FOLDING <i class="fa-solid fa-signature fa-fw"></i></button>
          <button class="pure-button" @click="undo()">UNDO <i class="fa-solid fa-undo fa-fw"></i></button>
          <button class="pure-button" @click="save()">EXPORT <i class="fa-solid fa-download fa-fw"></i></button>
        </div>
      </div>

      <div class="nav2 flex gap" id="simpleTab" x-show="tab == 'simple'">
        <button class="pure-button" @click="play()">PLAY <i class="fa-solid fa-play fa-fw"></i></button>
        <button class="pure-button" @click="stop()">STOP <i class="fa-solid fa-stop fa-fw"></i></button>
      </div>

      <div class="nav2 flex gap" id="synthTab" x-show="tab == 'synth'">
        <button class="pure-button" @click="playSynth()">NOTE <i class="fa-solid fa-music fa-fw"></i></button>
        <div class="label">Envelope</div>
        <input id="attackTime" type="range" min="10" max="3000" x-model="attackTime" />
        <label for="attackTime">Attack</label>
        <input id="sustainTime" type="range" min="10" max="3000" x-model="sustainTime" />
        <label for="sustainTime">Sustain</label>
        <input id="releaseTime" type="range" min="10" max="3000" x-model="releaseTime" />
        <label for="releaseTime">Release</label>

        <div class="label">Filter</div>
        <input id="filterCut" type="range" min="50" max="4000" x-model="filterCut" />
        <label for="filterCut">Cut</label>
        &nbsp;&nbsp;
        <input id="filterQ" type="range" min="0" max="20" x-model="filterQ" />
        <label for="filterQ">Res</label>
      </div>

      <div id="center">
        <canvas id="canvas" width="1200" height="400" @mousemove="modMouseDraw($event)" @mousedown="drawing=true; saveUndoBuffer()" @mouseup="drawing=false" @mouseleave="drawing=false"> </canvas>
      </div>

      <div class="tools flex gap">
        <div class="label">Generators:</div>
        <button class="w7 pure-button pure-button-primary" @click="genSaw()">SAW</button>
        <button class="w7 pure-button pure-button-primary" @click="genSquare()">SQUARE</button>
        <button class="w7 pure-button pure-button-primary" @click="genTriangle()">TRIANGLE</button>
        <button class="w7 pure-button pure-button-primary" @click="genSine()">SINE</button>
        <button class="w7 pure-button pure-button-primary" @click="genNoise()">NOISE</button>
      </div>

      <div class="tools flex gap">
        <div class="label">Modifiers:</div>
        <button class="pure-button button-success" @click="modPitch(2)">DOUBLE <i class="fa-fw fa-solid fa-angles-left"></i></button>
        <button class="pure-button button-success" @click="modLoopClean()">CLEAN LOOP <i class="fa-fw fa-solid fa-repeat"></i></button>
        <div class="divider"></div>
        <button class="pure-button button-success" @click="modSmooth(smoothSize)">SMOOTH <i class="fa-fw fa-solid fa-bezier-curve"></i></button>
        <select x-model="smoothSize">
          <option value="2">Size: 2</option>
          <option value="4">Size: 4</option>
          <option value="8">Size: 8</option>
          <option value="12">Size: 12</option>
          <option value="16">Size: 16</option>
        </select>
        <div class="divider"></div>
        <button class="pure-button button-success" @click="modRoughen(roughAmount, folding)">ROUGHEN <i class="fa-fw fa-solid fa-dice"></i></button>
        <select x-model="roughAmount">
          <option value="0.05">0.05</option>
          <option value="0.1">0.1</option>
          <option value="0.3">0.3</option>
          <option value="0.5">0.5</option>
        </select>
        <div class="divider"></div>
        <button class="pure-button button-success" @click="modAmp(ampAmount, folding)">AMP <i class="fa-fw fa-rotate-90 fa-solid fa-arrow-right-arrow-left"></i></button>

        <input id="amount" type="range" min="-200" max="200" x-model="ampAmount" />
        <label for="amount">Amp amount</label>
      </div>
    </main>
  </body>
</html>
